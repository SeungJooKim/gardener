{% extends "base.html" %}
{% load static %}
{% block head %}
    <link href="{% static 'style/css/community_post_form.css' %}" rel="stylesheet">
{% endblock %}
{% block content %}
    <div class='container main-body' style='background-color:#F5F5F5;'>
        <div class='row'>
            <div class='col col-1'>

            </div>
            <div class='col col-10 container-fluid d-flex flex-column' style='margin:0 auto; align-items: center;'>
                <div style='width:80%;'>
                    <div >
                        {% if form.title.value %}
                        <h4 class='mb-4  mt-5'>게시물 수정</h4>
                        {% else %}
                        <h4 class='mb-4  mt-5'>새 글 작성</h4>
                        {% endif %}
                        <form action='' method='POST' enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class='form-group mb-3'>
                                <label for="id_title" class="form-label">제목</label>
                                {% if form.title.value %}
                                <input type="text" class='form-control' name="title" maxlength="100" required="" id="id_title" value='{{form.title.value}}'>
                                {% else %}
                                <input type="text" class='form-control' name="title" maxlength="100" required="" id="id_title">
                                {% endif %}
                            </div>
                            <div class='form-group mb-3'>
                                <label for="id_image" class="form-label">썸네일</label>
                                {% if form.image.value %}
                                {{form.image}}
                                {% else %}
                                <input type="file" class='form-control' name="image" accept="image/*" id="id_image">
                                {% endif %}
                            </div>
                            <div class='form-group mb-3'>
                                <label for="content" class="form-label">내용</label>
                                <div style='width: 100%;'>
                                    {{ form.media }}
                                    {{ form.content }}
                                </div>
                            </div>
                            <div class='form-group'>
                                <label for = 'id_tags' class = 'form-label'>태그</label>
                                <input type="text"class="form-control" name="tags" id="id_tags" value="{%for tag in form.tags.value %}#{{tag}}{%endfor%}">
                                <span>{{form.tags.help_text}}</span>
                            </div>
                            <div class='text-center'>
                                {% if form.title.value %}
                                <input type="submit" value = '수정하기' style='background-color: #CCDFCC;  border-radius: 10px; border:0;' class='me-3'/>
                                <button type="button" style='background-color: #C4C4C4;  border-radius: 10px; border:0;'>
                                    <a href="{% url 'community:post_detail' pk %}" style='text-decoration:none; color:black;'>취소</a>
                                </button>
                                {% else %}
                                <input type="submit" value = '업로드' style='background-color: #CCDFCC;  border-radius: 10px; border:0;' class='me-3'/>
                                <button type="button" style='background-color: #C4C4C4;  border-radius: 10px; border:0;'>
                                    <a href="{% url 'community:post_list' %}" style='text-decoration:none; color:black;'>돌아가기</a>
                                </button>
                    
                                {% endif %}
                            </div>
                            
                        </form>
                    </div>
                </div>
                {% comment %}
                <h4 class='mb-4  mt-5'>새 글 작성</h4>
                <form action='' method='POST' enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class='form-group mb-3'>
                        <label for="id_title" class="form-label">제목</label>
                        {% if form.title.value %}
                            <input type="text" class='form-control' name="title" maxlength="100" required="" value="{{form.title.value}}" id="id_title">
                        {% else %}
                            <input type="text" class='form-control' name="title" maxlength="100" required="" id="id_title">
                        {% endif %}
                    </div>
                    <div class='form-group mb-3'>
                        <label for="id_image" class="form-label">썸네일</label>
                        {% if form.image.value %}
                        {{form.image}}
                        {% else %}
                        <input type="file" class='form-control' name="image" accept="image/*" id="id_image">
                        {% endif %}
                    </div>
                    <div class='form-group mb-3'>
                        <label for="content" class="form-label">내용</label>
                        <div>
                            {{ form.media }}
                            {{ form.content }}
                        </div>
                    </div>
                    <div class='form-group'>
                        <label for = 'id_tags' class = 'form-label'>태그</label>
                        <input type="text"class="form-control" name="tags" value="{%for tag in form.tags.value %}#{{tag}}{%endfor%}" id="id_tags">
                        <span>{{form.tags.help_text}}</span>
                    </div>
                    <div class='text-center'>
                        <input type="submit" value = '업로드' style='background-color: #CCDFCC;  border-radius: 10px;' class='me-3'/>
                        <button type="button" style='background-color: #C4C4C4;  border-radius: 10px;'>
                            <a href="{% url 'community:post_list' %}" style='text-decoration:none; color:black;'>돌아가기</a>
                        </button>
                    </div>
                    
                </form>
                {% endcomment %}
            </div>
            <div class='col col-1' style='writing-mode: vertical-rl;'>
                {% if form.title.value %}
                    <h4 class='mt-3' style='margin-left:0; margin-right:1vw;'>
                        포스트 수정중입니다
                    </h4>
                    
                {% else %}
                    <h4 class='mt-3' style='margin-left:1vw; margin-right:1vw;'>
                        여러분의 플랜테리어를
                    </h4>
                    <h4 class='mt-3' style='margin-left:0; margin-right:0;'>
                        공유해보세요
                    </h4>
                {% endif %}
            </div>
        </div>
        
    </div>
    
    
{% endblock %}

