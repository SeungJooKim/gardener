<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>
        <p> {{post.user_id}}</p>
    </div>
    <h1>{{ post.title }}</h1>
    <div>
        {{ post.content|safe }}
    </div>
    <h2>Add a new comment</h2>
    <form action="." method="post">
        {% csrf_token %}
        {{comment_form.media}}
        {{ comment_form.as_p }}

        <button type="submit">Add comment</button>
    </form>
    

    {% for comment in comments %}
    <div class="comment" style="background-color: powderblue">
        <p class="info">{{ comment.content|safe}} | {{ comment.created_at }}</p>

        {% for replay in comment.replies.all %}
        <p class="info">{{ replay.name }} | {{ replay.created_at }}</p>
        {% endfor %}

        <h5>Replay</h5>
        <form action="." method="post">
            {% csrf_token %}
            {{comment_form.media}}
            {{ comment_form.as_p }}

            <input type="hidden" name="parent_id" value="{{ comment.id }}">
            <input class="btn btn-primary" type="submit" value="Replay">
        </form>
    </div>
    {% empty %}
    <h4>There are no comments yet.</h4>
    {% endfor %}
</body>

</html>